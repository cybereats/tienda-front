<div class="food">

    <section class="food__hero">
        <div class="food__hero-overlay"></div>
        <img src="assets/food-hero.png" alt="Cyber Food" class="food__hero-bg">
        <div class="food__hero-content">
            <h1 class="food__title">CYBER <span class="highlight">EATS</span></h1>
            <p class="food__subtitle">Combustible para Gamers</p>
            <button (click)="scrollToMenu()" class="c-btn btn-glow--orange">VER MENÚ</button>
        </div>
    </section>


    <section class="food__section food__featured">
        <div class="food__container">
            <h2 class="section-title">LO MÁS <span class="highlight">POPULAR</span></h2>
            <div class="featured-grid">
                @for (product of featuredProducts; track product.id) {
                <food-card [product]="product" [showBadge]="true"></food-card>
                }
            </div>
        </div>
    </section>


    <section id="menu" class="food__section food__categories">
        <div class="food__container">
            <h2 class="section-title">NUESTRO <span class="highlight">MENÚ</span></h2>


            <div class="search-container">
                <input type="text" #searchInput (keyup.enter)="onSearch(searchInput.value)"
                    placeholder="Busca tu comida favorita..." class="search-input">
                <button (click)="onSearch(searchInput.value)" class="search-btn">🔍</button>
            </div>


            <div class="category-wrapper" #scrollContainer (wheel)="onWheelScroll($event)">
                <div class="category-tabs">
                    <button class="category-tab" [class.active]="selectedCategory === ''" (click)="selectCategory('')">
                        <span class="category-name">TODOS</span>
                    </button>
                    @for (cat of categories; track cat.id) {
                    <button class="category-tab" [class.active]="selectedCategory === cat.slug"
                        (click)="selectCategory(cat.slug)">
                        <span class="category-name">{{ cat.label }}</span>
                    </button>
                    }
                </div>
            </div>


            <div class="products-grid">
                @for (product of products; track product.id) {
                <food-card [product]="product"></food-card>
                }
            </div>


            @if (hasMoreProducts()) {
            <div class="load-more">
                <button (click)="loadMore()" class="c-btn btn-outline" [disabled]="isLoadingMore">
                    {{ isLoadingMore ? 'CARGANDO...' : 'VER MÁS PRODUCTOS' }}
                </button>
            </div>
            }
        </div>
    </section>


    <section class="food__section food__combos">
        <div class="food__container">
            <h2 class="section-title">COMBOS <span class="highlight">ESPECIALES</span></h2>
            <p class="section-desc">Ahorra más con nuestros combos diseñados para largas sesiones de gaming</p>

            <div class="combos-showcase">
                @for (combo of combos; track combo.id) {
                <div class="combo-card combo-card--large">
                    <div class="combo-card__bg">
                        <img [src]="'assets/' + combo.image" [alt]="combo.label">
                    </div>
                    <div class="combo-card__content">
                        <span class="combo-badge">COMBO</span>
                        <h3>{{ combo.label | uppercase }}</h3>
                        <p>{{ combo.description }}</p>
                        <div class="combo-price">
                            <span class="new-price">${{ combo.price }}</span>
                        </div>
                        @if (authService.user$ | async) {
                        <div class="cart-controls cart-controls--combo">
                            <button class="cart-btn cart-btn--minus" (click)="decrementCombo($event, combo)"
                                [disabled]="getComboQuantity(combo) === 0">−</button>
                            <span class="cart-qty">{{ getComboQuantity(combo) }}</span>
                            <button class="cart-btn cart-btn--plus" (click)="incrementCombo($event, combo)">+</button>
                        </div>
                        }
                    </div>
                </div>
                }
            </div>
        </div>
    </section>


    @if (!(authService.user$ | async)) {
    <section class="food__section food__cta">
        <div class="food__container">
            <div class="cta-content">
                <h2>¿LISTO PARA <span class="highlight">PEDIR?</span></h2>
                <p>Ordena desde tu terminal y te lo llevamos directamente a tu estación</p>
                <div class="cta-buttons">
                    <a routerLink="/register" class="c-btn btn-glow--orange">CREAR CUENTA</a>
                    <a routerLink="/login" class="c-btn btn-outline">INICIAR SESIÓN</a>
                </div>
            </div>
        </div>
    </section>
    }
</div>